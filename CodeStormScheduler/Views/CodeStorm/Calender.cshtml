@section styles{
    <script src="~/Scripts/dhtmlxScheduler/dhtmlxscheduler.js"></script>
    <link href="~/Scripts/dhtmlxScheduler/dhtmlxscheduler.css" rel="stylesheet" />
    <link href="~/Scripts/dhtmlxScheduler/dhtmlxscheduler_flat.css" rel="stylesheet" />
    <link href="~/Content/Calender/calender.css" rel="stylesheet" />
    <style>
        .calender-container {
            background: #fff;
            padding: 10px;
            border: 2px solid #dcdcdc;
            border-radius: 5px;
        }
    </style>
}

@section jsCode {
    angular.bootstrap(document.getElementById("calender"), ['calendarModule']);
}

@section headscripts{

}
<div id="calender" ng-app="calendarModule" ng-controller="calendarController">
    <h4>{{message}}</h4>
    <div class="calender-container">
        <div class="row">
            <div class="col-xs-12">
                <div id="scheduler_here" class="dhx_cal_container" style='width:100%; height:500px;'>
                    <div class="dhx_cal_navline">
                        <div class="dhx_cal_prev_button">&nbsp;</div>
                        <div class="dhx_cal_next_button">&nbsp;</div>
                        <div class="dhx_cal_today_button"></div>
                        <div class="dhx_cal_date"></div>
                        <div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div>
                        <div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div>
                        <div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>
                    </div>
                    <div class="dhx_cal_header"></div>
                    <div class="dhx_cal_data"></div>
                </div>
            </div>
        </div>
    </div>
    <input type="button" id="btnGet" value="SHOW" />
</div>
@section scripts{
    <script src="~/App/codestorm/calendar/model/calendar-meta.js"></script>
    <script src="~/App/codestorm/calendar/controllers/calendarController.js"></script>
    <script>
        //function GetData(uri, res) {
        //    //var result;
        //    $.ajax({
        //        url: uri,
        //        type: 'GET',
        //        success: function (data) {
        //            return data;
        //        },
        //        error: function () {
        //            alert('error');
        //        }
        //    });
        //    //return null;
        //    $.get("/Design/GetCalenderEvents", function (data, status) {
        //        res = data;
        //    });
        //};

        //function PostData(uri, event) {
        //    $.ajax({
        //        url: uri,
        //        type: 'POST',
        //        dataType: "json",
        //        contentType: 'application/json',
        //        data: JSON.stringify(event),
        //        success: function (data) {
        //            return data;
        //        },
        //        error: function () {
        //            alert('error');
        //        }
        //    });
        //};

        $(document).ready(function () {
            var dataHelper = commonHelper();
            scheduler.init('scheduler_here', new Date(2015, 5, 1), "month");
            
            dataHelper.getData('/EventsData/GetEvents', null,
                function (result) {
                    scheduler.parse(result, "json");
                });

            scheduler.attachEvent("onEventAdded", function (id, ev) {
                var dataHelper = commonHelper();
                var newEvent = { id: ev.id, start_date: ev.start_date, end_date: ev.end_date, text: ev.text };
                dataHelper.postData('/EventsData/AddEvent', newEvent,
                function (result) {
                    dataHelper.replaceValue(scheduler.getEvents(),"id",ev.id,"id",result);
                });
            });
            scheduler.attachEvent("onBeforeEventChanged", function (ev, e, is_new, original) {
                var dataHelper = commonHelper();
                var newEvent = { id: ev.id, start_date: ev.start_date, end_date: ev.end_date, text: ev.text };
                dataHelper.postData('/EventsData/UpdateEvent', newEvent,
                function (result) {

                });
                return true;
            });
        });
        $('#btnGet').click(function () {
            var dataHelper = commonHelper();
            //dataHelper.getData('/EventsData/GetEvents', null,
            //    function (result) {
            //        alert(JSON.stringify(result));
            //    });
            alert(JSON.stringify(scheduler.getEvents()));
        });
    </script>
}


