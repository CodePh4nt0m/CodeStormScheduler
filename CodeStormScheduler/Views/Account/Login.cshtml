@using CodeStormScheduler.Models
@using Microsoft.Owin.Security
@model LoginViewModel
@{
    Layout = null;
}
<!DOCTYPE html>
<!--[if IE 8]>         <html class="ie8"> <![endif]-->
<!--[if IE 9]>         <html class="ie9 gt-ie8"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="gt-ie8 gt-ie9 not-ie">
<!--<![endif]-->
<head>
    <meta charset="utf-8">
    <base href="/">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <title>CodeStorm</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <!-- Open Sans font from Google CDN -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin" rel="stylesheet" type="text/css">

    <!-- Pixel Admin's stylesheets -->
    @Styles.Render("~/Content/PixelAdmin")
    @Styles.Render("~/Content/Plugins")
    @Styles.Render("~/Content/Custom")

    <!--[if lt IE 9]>
        <script src="assets/javascripts/ie.min.js"></script>
    <![endif]-->
    <!-- $DEMO =========================================================================================

        Remove this section on production
    -->
    <style>
        #signin-demo {
            position: fixed;
            right: 0;
            bottom: 0;
            z-index: 10000;
            background: rgba(0,0,0,.6);
            padding: 6px;
            border-radius: 3px;
        }

            #signin-demo img {
                cursor: pointer;
                height: 40px;
            }

                #signin-demo img:hover {
                    opacity: .5;
                }

            #signin-demo div {
                color: #fff;
                font-size: 10px;
                font-weight: 600;
                padding-bottom: 6px;
            }

        .has-error input {
            border-color: #dd455e !important;
            -webkit-box-shadow: none;
            box-shadow: none;
        }

            .has-error input:focus {
                border-color: #dd455e !important;
                -webkit-box-shadow: none !important;
                box-shadow: none !important;
            }

        .has-error .jquery-validate-error {
            color: #dd455e !important;
            font-size: 12px;
            font-family: 'Open Sans';
            display: inline;
        }
    </style>
    <!-- / $DEMO -->

</head>


<!-- 1. $BODY ======================================================================================

    Body

    Classes:
    * 'theme-{THEME NAME}'
    * 'right-to-left'     - Sets text direction to right-to-left
-->
<body class="theme-default page-signin">

    <script>
        var init = [];
    </script>
    <!-- Demo script -->
    <script src="~/Scripts/PixelAdmin/demo.js"></script>
    <!-- / Demo script -->
    <!-- Page background -->
    <div id="page-signin-bg">
        <!-- Background overlay -->
        <div class="overlay"></div>
        <!-- Replace this with your bg image -->
        <img src="/assets/demo/signin-bg-1.jpg" alt="">
    </div>
    <!-- / Page background -->
    <!-- Container -->
    <div class="signin-container">

        <!-- Left side -->
        <div class="signin-info">
            <a href="/" class="logo">
                <img src="/assets/demo/logo-big.png" alt="" style="margin-top: -5px;">&nbsp;
                CodeStorm
            </a> <!-- / .logo -->
            <div class="slogan">
                Simple. Flexible. Powerful.
            </div> <!-- / .slogan -->
            <ul>
                <li><i class="fa fa-sitemap signin-icon"></i> Flexible modular structure</li>
                <li><i class="fa fa-circle-o signin-icon"></i> Keep you circle updated</li>
                <li><i class="fa fa-calendar-o signin-icon"></i> Prioritize your work</li>
                <li><i class="fa fa-heart signin-icon"></i> Made with love and passion</li>
            </ul> <!-- / Info list -->
        </div>
        <!-- / Left side -->
        <!-- Right side -->
        <div class="signin-form">

            <!-- Form -->
            @using (Html.BeginForm("Login", "Account", FormMethod.Post, new { role = "form", id = "signin-form_id" }))
            {
                @Html.AntiForgeryToken()
                <div class="signin-text">
                    <span>Sign In to your account</span>
                </div>
                <!-- / .signin-text -->

                <div class="form-group w-icon">
                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control input-lg", placeholder = "Email" })
                    <span class="fa fa-user signin-form-icon"></span>
                </div>
                <!-- / Username -->

                <div class="form-group w-icon">
                    @Html.PasswordFor(m => m.Password, new { @class = "form-control input-lg", placeholder = "Password" })
                    <span class="fa fa-lock signin-form-icon"></span>
                </div>
                <div class="alert alert-danger alert-dark login-alert" style="display: none;text-align: center">
                    Invalid login credentials
                </div>
                <!-- / Password -->
                <div class="form-group" style="margin-top: 5px;">
                    <label class="checkbox-inline">
                        <input class="px" id="RememberMe" name="RememberMe" type="checkbox" value="true">
                        <span class="lbl">Remember Me</span>
                    </label>
                </div>

                <div class="form-actions">
                    <input type="submit" value="SIGN IN" class="signin-btn bg-primary" id="btnLogIn">
                    <a href="/Account/ForgotPassword" class="forgot-password">Forgot your password?</a>
                </div>
                <!-- / .form-actions -->
            }
            <!-- / Form -->
            <!-- "Sign In with" block -->
            <div class="signin-with">
                <!-- Facebook -->
                @Html.Partial("_ExternalLoginsListPartial", new ExternalLoginListViewModel { ReturnUrl = ViewBag.ReturnUrl })
            </div>
            <!-- / "Sign In with" block -->
        </div>
        <!-- Right side -->
    </div>
    <!-- / Container -->

    <div class="not-a-member">
        Not a member? <a href="/Account/Register">Sign up now</a>
    </div>

    <!-- Get jQuery from Google CDN -->
    <!--[if !IE]> -->
    @*<script type="text/javascript"> window.jQuery || document.write('<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js">' + "<" + "/script>"); </script>*@
    <!-- <![endif]-->
    <!--[if lte IE 9]>
        <script type="text/javascript"> window.jQuery || document.write('<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">'+"<"+"/script>"); </script>
    <![endif]-->
    <!-- Pixel Admin's javascripts -->
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/angular")
    @Scripts.Render("~/bundles/pixeladmin")
    @Scripts.Render("~/bundles/plugins")
    <script type="text/javascript">
        // Resize BG
        init.push(function () {
            var $ph = $('#page-signin-bg'),
                $img = $ph.find('> img');

            $(window).on('resize', function () {
                $img.attr('style', '');
                if ($img.height() < $ph.height()) {
                    $img.css({
                        height: '100%',
                        width: 'auto'
                    });
                }
            });
        });

        // Show/Hide password reset form on click
        init.push(function () {
            $('#forgot-password-link').click(function () {
                $('#password-reset-form').fadeIn(400);
                return false;
            });
            $('#password-reset-form .close').click(function () {
                $('#password-reset-form').fadeOut(400);
                return false;
            });
        });



        window.PixelAdmin.start(init);
    </script>
    <script>
        $(document).ready(function () {
            var msg = '@ViewBag.Message';
            if (msg != "") {
                $('.login-alert').show();
                $('.login-alert').addClass('animated fadeIn');
            }
        });
        $('#btnLogIn').click(function () {
            $('.login-alert').hide();
            var form = $("#signin-form_id");
            if (!form.valid()) {
                $('.signin-container').addClass('animated shake');
                setTimeout((function () { $('.signin-container').removeClass('animated shake'); }), 4000);
                return false;
            }
            return true;
        });
        $('#signin-form_id').validate({
            rules: {
                Email: {
                    required: true,
                    email: true
                },
                Password: {
                    required: true
                }
            },
            messages: {
                Email: {
                    required: "Email is required",
                    email: "Invalid Email address"
                },
                Password: {
                    required: "Password is required"
                }
            },
            errorPlacement: function (error, element) {
                element.parent().append(error);
            }
        });
        $('#btnResetPass').click(function () {
            var email = $('#p_email_id').val();
            var model = { Email: email };
            $.ajax({
                type: "POST",
                url: "/Account/ForgotPassword",
                data: model,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: true,
                success: function (response) {
                    var result = JSON.parse(response.d);
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    alert(errorThrown);
                }
            });
            return true;
        });
    </script>

</body>
</html>